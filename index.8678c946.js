var t=document.querySelector(".start"),e=document.querySelectorAll(".field-row"),r=document.querySelector(".game-score"),n=document.querySelectorAll(".message"),a=Math.floor(4*Math.random()),l=Math.floor(4*Math.random()),o=0,s=0,c=[["","","",""],["","","",""],["","","",""],["","","",""]];t.addEventListener("click",function(r){for(var o=0;o<c.length;o++)for(var s=0;s<c[o].length;s++)c[o][s]="",e[o].children[s].className="",e[o].children[s].classList.add("field-cell"),t.textContent="Re start";for(t.classList.add("restart"),c[Math.floor(4*Math.random())][Math.floor(4*Math.random())]=2;""!==c[a][l];)a=Math.floor(4*Math.random()),l=Math.floor(4*Math.random());c[Math.floor(4*Math.random())][Math.floor(4*Math.random())]=2;for(var i=0;i<c.length;i++)for(var d=0;d<c[i].length;d++)e[i].children[d].textContent=c[i][d],""!==c[i][d]&&e[i].children[d].classList.add("field-cell--".concat(c[i][d]));for(var h=0;h<n.length;h++)n[h].classList.contains("message-start")&&n[h].classList.add("hidden"),n[h].classList.contains("message-lose")&&n[h].classList.add("hidden")}),document.addEventListener("keydown",function(t){if("ArrowRight"===t.key){c.forEach(function(t,r,n){var a=t.map(function(t){return""===t?0:t});a.sort(function(t,e){return 0===t&&0!==e?(o++,-1):0!==t&&0===e?1:0});for(var l=a.length-1;l>0;l--)a[l]===a[l-1]&&0!==a[l]&&(a[l]+=a[l-1],s+=a[l],a[l-1]=0,o++,e[r].children[l].textContent=a[l]),0===a[l]&&(a[l]=a[l-1],a[l-1]=0);for(var c=0;c<t.length;c++)0===a[c]?(t[c]="",e[r].children[c].textContent=t[c]):t[c]=a[c]});for(var i=0;i<c.length;i++)for(var d=0;d<c[i].length;d++)e[i].children[d].textContent=c[i][d],e[i].children[d].className="",e[i].children[d].classList.add("field-cell"),""!==c[i][d]&&e[i].children[d].classList.add("field-cell--".concat(c[i][d]))}if("ArrowLeft"===t.key){c.forEach(function(t,r,n){var a=t.map(function(t){return""===t?0:t});a.sort(function(t,e){return 0===e&&0!==t?(o++,-1):0!==e&&0===t?1:0});for(var l=0;l<a.length-1;l++)a[l]===a[l+1]&&0!==a[l]&&(a[l]+=a[l+1],s+=a[l],a[l+1]=0,o++,e[r].children[l].textContent=a[l]),0===a[l]&&(a[l]=a[l+1],a[l+1]=0);for(var c=0;c<t.length;c++)0===a[c]?(t[c]="",e[r].children[c].textContent=t[c]):t[c]=a[c]});for(var h=0;h<c.length;h++)for(var f=0;f<c[h].length;f++)e[h].children[f].textContent=c[h][f],e[h].children[f].className="",e[h].children[f].classList.add("field-cell"),""!==c[h][f]&&e[h].children[f].classList.add("field-cell--".concat(c[h][f]))}if("ArrowDown"===t.key){c.forEach(function(t){for(var e=0;e<t.length;e++)""===t[e]&&(t[e]=0)});for(var g=0;g<4;g++)!function(t){for(var r=[],n=0;n<c.length;n++)r.push(c[n][t]);r.sort(function(t,e){return 0===t&&0!==e?(o++,-1):0!==t&&0===e?1:0});for(var a=r.length-1;a>0;a--)r[a]===r[a-1]&&0!==r[a]&&(r[a]+=r[a],s+=r[a],r[a-1]=0,o++,r.sort(function(t,e){return 0===t&&0!==e?-1:0!==t&&0===e?1:0}));for(var l=0;l<c.length;l++)0===r[l]?c[l][t]="":c[l][t]=r[l];for(var i=0;i<c.length;i++)for(var d=0;d<c[i].length;d++)e[i].children[d].textContent=c[i][d],e[i].children[d].className="",e[i].children[d].classList.add("field-cell"),""!==c[i][d]&&e[i].children[d].classList.add("field-cell--".concat(c[i][d]))}(g)}if("ArrowUp"===t.key){c.forEach(function(t){for(var e=0;e<t.length;e++)""===t[e]&&(t[e]=0)});for(var v=0;v<4;v++)!function(t){for(var r=[],n=0;n<c.length;n++)r.push(c[n][t]);r.sort(function(t,e){return 0===e&&0!==t?(o++,-1):0!==e&&0===t?1:0});for(var a=r.length-1;a>0;a--)r[a]===r[a-1]&&0!==r[a]&&(r[a]+=r[a],s+=r[a],r[a-1]=0,o++,r.sort(function(t,e){return 0===e&&0!==t?-1:0!==e&&0===t?1:0}));for(var l=0;l<c.length;l++)0===r[l]?c[l][t]="":c[l][t]=r[l];for(var i=0;i<c.length;i++)for(var d=0;d<c[i].length;d++)e[i].children[d].textContent=c[i][d],e[i].children[d].className="",e[i].children[d].classList.add("field-cell"),""!==c[i][d]&&e[i].children[d].classList.add("field-cell--".concat(c[i][d]))}(v)}if(0===o){for(var m=!1,u=0;u<c.length;u++)c[u].includes("")&&(m=!0);if(!m){for(var L=!1,M=0;M<c.length;M++)for(var x=0;x<c[M].length-1;x++)c[M][x]===c[M][x+1]&&(L=!0);for(var C=0;C<c.length-1;C++)for(var w=0;w<c[C].length;w++)c[C][w]===c[C+1][w]&&(L=!0);if(!L)for(var y=0;y<n.length;y++)n[y].classList.contains("message-win")&&n[y].classList.add("hidden"),n[y].classList.contains("message-lose")&&n[y].classList.remove("hidden")}}if(o>0){for(;""!==c[a][l];)a=Math.floor(4*Math.random()),l=Math.floor(4*Math.random());if(c[a][l]=Math.random()>.9?4:2,0==(o=0)){for(var k=!1,A=0;A<c.length;A++)c[A].includes("")&&(k=!0);if(!k){for(var E=!1,N=0;N<c.length;N++)for(var p=0;p<c[N].length-1;p++)c[N][p]===c[N][p+1]&&(E=!0);for(var q=0;q<c.length-1;q++)for(var S=0;S<c[q].length;S++)c[q][S]===c[q+1][S]&&(E=!0);if(!E)for(var R=0;R<n.length;R++)n[R].classList.contains("message-win")&&n[R].classList.add("hidden"),n[R].classList.contains("message-lose")&&n[R].classList.remove("hidden")}}}r.textContent=s;for(var D=0;D<c.length;D++)for(var U=0;U<c[D].length;U++){if(e[D].children[U].textContent=c[D][U],2048===c[D][U])for(var b=0;b<n.length;b++)n[b].classList.contains("message-win")&&n[b].classList.remove("hidden");""!==c[D][U]?e[D].children[U].classList.add("field-cell--".concat(c[D][U])):(e[D].children[U].className="",e[D].children[U].classList.add("field-cell"))}a=Math.floor(4*Math.random()),l=Math.floor(4*Math.random())});
//# sourceMappingURL=index.8678c946.js.map
